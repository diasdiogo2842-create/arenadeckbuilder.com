<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Clash Deck Rater</title>
  <style>
    body {
      background-color: #1e1e1e;
      color: white;
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
    }

    input[type="text"] {
      padding: 10px;
      width: 80%;
      border-radius: 5px;
      border: none;
      background-color: #333;
      color: white;
    }

    button {
      padding: 10px 20px;
      margin-top: 10px;
      background-color: #007bff;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    .result {
      margin-top: 30px;
      font-size: 1.5em;
    }

    .godly {
      font-weight: bold;
      background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: rainbow 4s linear infinite;
    }

    @keyframes rainbow {
      0% {filter: hue-rotate(0deg);}
      100% {filter: hue-rotate(360deg);}
    }
  </style>
</head>
<body>
  <h1>Deck Check AI</h1>
  <p>Paste your Clash Royale deck link below:</p>
  <input id="deckLink" type="text" placeholder="https://link.clashroyale.com/deck/en?deck=..." />
  <br>
  <button onclick="rateDeck()">Analyze Deck</button>

  <div class="result" id="resultText"></div>

  <script>
    const cardMap = {
      "26000000": "Knight",
      "26000001": "Archers",
      "26000002": "Goblins",
      "26000003": "Giant",
      "26000004": "P.E.K.K.A",
      "26000005": "Minions",
      "26000006": "Balloon",
      "26000007": "Witch",
      "26000008": "Barbarians",
      "26000009": "Golem",
      "26000010": "Skeletons",
      // add more card IDs as needed
    };

    const metaDecks = [
      ["Knight", "Archers", "Goblins", "Giant", "Minions", "Fireball", "Zap", "Cannon"],
      ["P.E.K.K.A", "Wizard", "Baby Dragon", "Tornado", "Miner", "Poison", "Bandit", "Electro Wizard"],
      ["Golem", "Night Witch", "Mega Minion", "Lightning", "Tornado", "Baby Dragon", "Dark Prince", "Lumberjack"]
    ];

    const counterMap = {
      "Golem": ["P.E.K.K.A", "Inferno Tower", "Mini P.E.K.K.A"],
      "Balloon": ["Musketeer", "Minions", "Electro Dragon"],
      "Hog Rider": ["Tornado", "Cannon", "Mini P.E.K.K.A"],
      "Witch": ["Poison", "Fireball", "Dark Prince"],
      "Giant": ["Inferno Tower", "Mini P.E.K.K.A", "P.E.K.K.A"],
      // Add more counters as needed
    };

    function extractCardIDs(link) {
      const match = link.match(/deck=([\d;]+)/);
      if (!match) return [];
      return match[1].split(";");
    }

    function getCardNames(cardIDs) {
      return cardIDs.map(id => cardMap[id]).filter(Boolean);
    }

    function countMetaCounters(userDeck) {
      let counteredDecks = 0;
      for (let deck of metaDecks) {
        let beaten = false;
        for (let metaCard of deck) {
          if (counterMap[metaCard]) {
            const counters = counterMap[metaCard];
            if (userDeck.some(card => counters.includes(card))) {
              beaten = true;
              break;
            }
          }
        }
        if (beaten) counteredDecks++;
      }
      return counteredDecks;
    }

    function rateDeck() {
      const link = document.getElementById("deckLink").value.trim();
      const ids = extractCardIDs(link);
      const cardNames = getCardNames(ids);

      if (cardNames.length === 0) {
        document.getElementById("resultText").textContent = "Invalid link or unsupported cards.";
        return;
      }

      const beatCount = countMetaCounters(cardNames);

      let resultText = "";
      if (beatCount >= 3) {
        resultText = '<span class="godly">Rating: GODLY</span>';
      } else if (beatCount === 2) {
        resultText = "Rating: Good";
      } else if (beatCount === 1) {
        resultText = "Rating: Mid";
      } else {
        resultText = "Rating: Bad";
      }

      document.getElementById("resultText").innerHTML = resultText;
    }
  </script>
</body>
</html>
